<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º!</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –°–Ω–µ–∂–∏–Ω–∫–∏ -->
    <div class="snowflakes">
        <div class="snowflake">‚ùÖ</div>
        <div class="snowflake">‚ùÖ</div>
        <div class="snowflake">‚ùÜ</div>
        <div class="snowflake">‚ùÖ</div>
        <div class="snowflake">‚ùÜ</div>
        <div class="snowflake">‚ùÖ</div>
    </div>

    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <header>
            <h1><span class="highlight">–° –Ω–æ–≤—ã–º –≥–æ–¥–æ–º, –∫–æ—Ç–µ–Ω–æ–∫!</span></h1>
            <div class="jackpot">
                <i class="fas fa-gem"></i>
                <p class="subtitle">–¢—ã —Å–æ—Ä–≤–∞–ª–∞ –¥–∂–µ–∫–ø–æ—Ç —ç—Ç–æ–π –ª–æ—Ç–µ—Ä–µ–∏!</p>
                <i class="fas fa-gem"></i>
            </div>
            <p class="instruction">–í—ã–±–µ—Ä–∏ –¥–∏–∑–∞–π–Ω —Å–≤–æ–µ–≥–æ –ø–æ–¥–∞—Ä–∫–∞:</p>
        </header>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main>
            <!-- –í–∞—Ä–∏–∞–Ω—Ç 1 -->
            <div class="gift-option">
                <div class="option-header">
                    <input type="checkbox" id="option1" name="gift" value="–í–∞—Ä–∏–∞–Ω—Ç 1">
                    <label for="option1" class="option-title">
                        <i class="fas fa-heart"></i> –í–∞—Ä–∏–∞–Ω—Ç 1
                    </label>
                </div>
                <div class="images">
                    <!-- –í–∞—à–∏ —Ñ–æ—Ç–æ -->
                    <img src="https://i.ibb.co/B5r33jzp/photo1.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 1 —Ñ–æ—Ç–æ 1">
                    <img src="https://i.ibb.co/NdvHwzP7/photo2.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 1 —Ñ–æ—Ç–æ 2">
                </div>
            </div>

            <!-- –í–∞—Ä–∏–∞–Ω—Ç 2 -->
            <div class="gift-option">
                <div class="option-header">
                    <input type="checkbox" id="option2" name="gift" value="–í–∞—Ä–∏–∞–Ω—Ç 2">
                    <label for="option2" class="option-title">
                        <i class="fas fa-star"></i> –í–∞—Ä–∏–∞–Ω—Ç 2
                    </label>
                </div>
                <div class="images">
                    <!-- –í–∞—à–∏ —Ñ–æ—Ç–æ -->
                    <img src="https://i.ibb.co/s9pjBdzQ/photo3.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 2 —Ñ–æ—Ç–æ 1">
                    <img src="https://i.ibb.co/XZJfzwHC/photo4.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 2 —Ñ–æ—Ç–æ 2">
                    <img src="https://i.ibb.co/XkLbKZPX/photo5.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 2 —Ñ–æ—Ç–æ 3">
                </div>
            </div>

            <!-- –í–∞—Ä–∏–∞–Ω—Ç 3 -->
            <div class="gift-option">
                <div class="option-header">
                    <input type="checkbox" id="option3" name="gift" value="–í–∞—Ä–∏–∞–Ω—Ç 3">
                    <label for="option3" class="option-title">
                        <i class="fas fa-moon"></i> –í–∞—Ä–∏–∞–Ω—Ç 3
                    </label>
                </div>
                <div class="images">
                    <!-- –í–∞—à–∏ —Ñ–æ—Ç–æ -->
                    <img src="https://i.ibb.co/ZbXvN7b/photo6.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 3 —Ñ–æ—Ç–æ 1">
                    <img src="https://i.ibb.co/RkN0JH3z/photo7.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 3 —Ñ–æ—Ç–æ 2">
                </div>
            </div>

            <!-- –í–∞—Ä–∏–∞–Ω—Ç 4 -->
            <div class="gift-option">
                <div class="option-header">
                    <input type="checkbox" id="option4" name="gift" value="–í–∞—Ä–∏–∞–Ω—Ç 4">
                    <label for="option4" class="option-title">
                        <i class="fas fa-gift"></i> –í–∞—Ä–∏–∞–Ω—Ç 4
                    </label>
                </div>
                <div class="images">
                    <!-- –í–∞—à–∏ —Ñ–æ—Ç–æ -->
                    <img src="https://i.ibb.co/twntTvTF/photo8.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 4 —Ñ–æ—Ç–æ">
                </div>
            </div>

            <!-- –í–∞—Ä–∏–∞–Ω—Ç 5 -->
            <div class="gift-option">
                <div class="option-header">
                    <input type="checkbox" id="option5" name="gift" value="–í–∞—Ä–∏–∞–Ω—Ç 5">
                    <label for="option5" class="option-title">
                        <i class="fas fa-crown"></i> –í–∞—Ä–∏–∞–Ω—Ç 5
                    </label>
                </div>
                <div class="images">
                    <!-- –í–∞—à–∏ —Ñ–æ—Ç–æ -->
                    <img src="https://i.ibb.co/b5ywmdbL/photo9.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 5 —Ñ–æ—Ç–æ 1">
                    <img src="https://i.ibb.co/bgzXKNZh/photo10.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 5 —Ñ–æ—Ç–æ 2">
                    <img src="https://i.ibb.co/spjtkvkR/photo11.jpg" alt="–ü–æ–¥–∞—Ä–æ–∫ 5 —Ñ–æ—Ç–æ 3">
                </div>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
            <div class="button-container">
                <button id="submitBtn">
                    <i class="fas fa-paper-plane"></i> 
                    <span>–û—Ç–ø—Ä–∞–≤–∏—Ç—å –º–æ–π –≤—ã–±–æ—Ä</span>
                    <i class="fas fa-snowflake spinning"></i>
                </button>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ -->
            <div id="successMessage" class="hidden">
                <div class="success-box">
                    <i class="fas fa-check-circle"></i>
                    <h2>–¢–≤–æ–π –≤—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω! ‚ù§Ô∏è</h2>
                    <p>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ. –°–∫–æ—Ä–æ —Å–≤—è–∂–µ–º—Å—è!</p>
                    <p class="wish">–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º, –º–æ—è –¥–æ—Ä–æ–≥–∞—è!</p>
                    <div class="telegram-info">
                        <i class="fab fa-telegram"></i>
                        <p>–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram</p>
                    </div>
                </div>
            </div>

            <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
            <div id="errorMessage" class="hidden">
                <div class="error-box">
                    <i class="fas fa-exclamation-circle"></i>
                    <h2>–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫</h2>
                    <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Å—å —Å–æ –º–Ω–æ–π –Ω–∞–ø—Ä—è–º—É—é –∏ —Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–≤–æ–µ–º –≤—ã–±–æ—Ä–µ!</p>
                    <p class="contact-info">–¢–≤–æ–π –≤—ã–±–æ—Ä: <span id="selectedOptionsText"></span></p>
                </div>
            </div>
        </main>

        <!-- –ü–æ–¥–≤–∞–ª -->
        <footer>
            <p>–° –ª—é–±–æ–≤—å—é, —Ç–≤–æ–π –î–µ–¥ –ú–æ—Ä–æ–∑ üéÖ</p>
            <div class="footer-icons">
                <span>üéÑ</span>
                <span>üéÅ</span>
                <span>‚ùÑÔ∏è</span>
                <span>üåü</span>
                <span>ü¶å</span>
            </div>
        </footer>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Telegram –±–æ—Ç–∞
        const TELEGRAM_BOT_TOKEN = '7768833842:AAHu7dJSsbqlPgX5PQ3VSl-KDnQEH9TVrwI';
        const TELEGRAM_CHAT_ID = '2015757741'; // –ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –≤–∞—à Chat ID

        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const submitBtn = document.getElementById('submitBtn');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const selectedOptionsText = document.getElementById('selectedOptionsText');

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
        function getSelectedOptions() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
            const selected = Array.from(checkboxes).map(cb => cb.value);
            return selected;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
        async function sendToTelegram(selectedOptions) {
            // –ï—Å–ª–∏ Chat ID –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º
            if (TELEGRAM_CHAT_ID === 'YOUR_CHAT_ID') {
                console.warn('Chat ID –Ω–µ —É–∫–∞–∑–∞–Ω! –ò—Å–ø–æ–ª—å–∑—É—é —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º.');
                console.log('–í—ã–±—Ä–∞–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:', selectedOptions);
                return { ok: true, test: true };
            }

            const message = `üéÑ *–ù–û–í–û–ì–û–î–ù–ò–ô –í–´–ë–û–†* üéÑ\n\n` +
                           `üíå *–í—ã–±—Ä–∞–Ω—ã –≤–∞—Ä–∏–∞–Ω—Ç—ã:*\n${selectedOptions.map((opt, i) => `  ${i+1}. ${opt}`).join('\n')}\n\n` +
                           `üìÖ *–î–∞—Ç–∞:* ${new Date().toLocaleString('ru-RU')}\n` +
                           `‚ú® *–í—Å–µ–≥–æ –≤—ã–±—Ä–∞–Ω–æ:* ${selectedOptions.length} –≤–∞—Ä–∏–∞–Ω—Ç(–∞/–æ–≤)\n\n` +
                           `üéÖ *–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º, –∫–æ—Ç–µ–Ω–æ–∫!* ‚ù§Ô∏è`;
            
            const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            
            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
                return { ok: false, error: error.message };
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–Ω–µ–∂–∏–Ω–æ–∫
        function createSnow() {
            const container = document.querySelector('.container');
            for (let i = 0; i < 30; i++) {
                const snow = document.createElement('div');
                snow.className = 'snow-particle';
                snow.style.left = Math.random() * 100 + '%';
                snow.style.animationDelay = Math.random() * 3 + 's';
                snow.style.fontSize = Math.random() * 15 + 10 + 'px';
                snow.innerHTML = ['‚ùÑ', '‚ùÖ', '‚ùÜ'][Math.floor(Math.random() * 3)];
                container.appendChild(snow);
                
                setTimeout(() => {
                    if (snow.parentNode) {
                        snow.remove();
                    }
                }, 5000);
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        function createConfetti() {
            const container = document.querySelector('.container');
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ff9900'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 10 + 5 + 'px';
                confetti.style.borderRadius = '50%';
                confetti.style.position = 'absolute';
                confetti.style.opacity = '0.8';
                confetti.style.zIndex = '100';
                confetti.style.top = '-20px';
                confetti.style.animation = `fall ${Math.random() * 2 + 2}s linear forwards`;
                
                container.appendChild(confetti);
                
                setTimeout(() => {
                    if (confetti.parentNode) {
                        confetti.remove();
                    }
                }, 4000);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏
        submitBtn.addEventListener('click', async function() {
            const selectedOptions = getSelectedOptions();
            
            if (selectedOptions.length === 0) {
                alert('üíù –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ–¥–∞—Ä–∫–∞!');
                return;
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>–û—Ç–ø—Ä–∞–≤–ª—è—é –≤ Telegram...</span>';
            this.disabled = true;

            try {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
                const result = await sendToTelegram(selectedOptions);
                
                if (result.ok) {
                    // –£—Å–ø–µ—Ö
                    successMessage.classList.remove('hidden');
                    this.style.display = 'none';
                    
                    // –ê–Ω–∏–º–∞—Ü–∏–∏
                    createSnow();
                    createConfetti();
                    
                    // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Å–æ–æ–±—â–µ–Ω–∏—é
                    successMessage.scrollIntoView({ behavior: 'smooth' });
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π
                    localStorage.setItem('newYearChoice', JSON.stringify({
                        options: selectedOptions,
                        date: new Date().toISOString(),
                        sentToTelegram: true
                    }));
                    
                    console.log('‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ! –í—ã–±—Ä–∞–Ω–æ:', selectedOptions);
                    
                } else {
                    // –û—à–∏–±–∫–∞ Telegram
                    throw new Error(result.description || '–û—à–∏–±–∫–∞ Telegram');
                }
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                selectedOptionsText.textContent = selectedOptions.join(', ');
                errorMessage.classList.remove('hidden');
                successMessage.classList.add('hidden');
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É
                this.innerHTML = originalText;
                this.disabled = false;
                
                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –æ—à–∏–±–∫–µ
                errorMessage.scrollIntoView({ behavior: 'smooth' });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
                localStorage.setItem('newYearChoice', JSON.stringify({
                    options: selectedOptions,
                    date: new Date().toISOString(),
                    error: error.message
                }));
            }
        });

        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            const saved = localStorage.getItem('newYearChoice');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    console.log('üìù –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤—ã–±–æ—Ä:', data.options);
                    
                    // –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–∞–ª–æ—á–∫–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                    // data.options.forEach(optionValue => {
                    //     const checkbox = document.querySelector(`input[value="${optionValue}"]`);
                    //     if (checkbox) checkbox.checked = true;
                    // });
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:', e);
                }
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è —Å–Ω–µ–∂–∏–Ω–æ–∫ —Ñ–æ–Ω–∞
            const snowflakes = document.querySelectorAll('.snowflake');
            snowflakes.forEach((flake, index) => {
                flake.style.left = `${Math.random() * 100}%`;
                flake.style.animationDelay = `${Math.random() * 5}s`;
                flake.style.fontSize = `${Math.random() * 15 + 10}px`;
            });
        });
    </script>
</body>
</html>